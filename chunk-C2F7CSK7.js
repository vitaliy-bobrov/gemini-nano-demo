import{a as Y,b as Z,c as ee,d as te,e as re,f as ae,g as ie,h as ne,i as oe,j as me}from"./chunk-L6UHUXTR.js";import"./chunk-26HO3GLA.js";import{a as G,b as O,c as F,d as W,f as U,g as B,h as j,l as X}from"./chunk-V7XMB45P.js";import{$ as D,$a as y,$c as H,Db as h,Eb as S,Fb as z,Ha as x,Uc as L,Va as _,Vc as V,W as A,Wa as v,Ya as w,Za as g,_a as f,a as E,ab as m,b as k,bb as o,c as P,cb as b,d as c,dd as R,ed as J,fd as Q,gd as $,hd as q,jb as C,jd as K,kb as N,ma as p,pa as T,xa as s,yb as l,zb as d}from"./chunk-JWYJDHHG.js";var M=class a extends j{summarizer=p(null);checkAvailability(){return c(this,arguments,function*(t={outputLanguage:"en"}){if(self.Summarizer){let r=yield self.Summarizer.availability(t);this.availabilityStatus.set(r)}else this.availabilityStatus.set("unavailable")})}createSummarizer(){return c(this,arguments,function*(t={outputLanguage:"en"}){switch(this.availability()){case"unavailable":throw new Error("Summarizer API is not available.");case"checking":throw new Error("Summarizer API availability is still being checked.");case"downloading":throw new Error("Summarizer API is currently downloading.");case"available":case"downloadable":{if(!this.isUserActivated())throw new Error("User activation is required to download the Summarizer API.");if(self.Summarizer){let r=yield self.Summarizer.create(k(E({},t),{monitor:e=>{e.addEventListener("downloadprogress",n=>{this.modelTotalSizeState.set(n.total??null),this.downloadProgressState.set(n.loaded*100)})}}));yield this.checkAvailability(t),this.summarizer.set(r)}return this.summarizer()}default:throw new Error("Unknown availability status.")}})}summarize(t,r,e){return c(this,null,function*(){this.destroy();let n=yield this.createSummarizer(r);if(!n)throw new Error("Summarizer API is not available.");let i=n.inputQuota;if((yield n.measureInputUsage(t))>i)throw new Error("Insufficient quota to summarize content.");return n.summarize(t,{context:e})})}summarizeStreaming(t,r,e){return c(this,null,function*(){this.destroy();let n=yield this.createSummarizer(r);if(!n)throw new Error("Summarizer API is not available.");let i=n.inputQuota;if((yield n.measureInputUsage(t))>i)throw new Error("Insufficient quota to summarize content.");return n.summarizeStreaming(t,{context:e})})}destroy(){this.summarizer()?.destroy(),this.summarizer.set(null)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=T(a)))(e||a)}})();static \u0275prov=A({token:a,factory:a.\u0275fac,providedIn:"root"})};var se=[{author:"Jane Doe",date:"2025-09-21 11:00 AM",content:"I'm having trouble with the new checkout process. My credit card (Visa ending in 1234, cardholder name Jane M. Doe) was charged twice for order #56789. My email is jane.doe@example.com and my phone number is (555) 123-4567. This is frustrating as I now have to deal with my bank to reverse the charge. The transaction IDs are txn_1G... and txn_2H... I expected a smoother experience."},{author:"John Smith",date:"2025-09-21 11:15 AM",content:"The system is not applying the discount code 'SUMMER25' correctly. I tried to purchase a subscription (plan ID: premium-monthly) and the final price was incorrect. My user ID is john.s-998, and my registered address is 123 Main St, Anytown, USA, 12345. I've cleared my cache and tried different browsers, but the issue persists. My session ID is abc-def-ghi. Can someone from support, maybe from the team of bob@google.com, please look into this?"},{author:"Peter Jones",date:"2025-09-21 11:30 AM",content:"I am unable to reset my password. I have followed the password reset link sent to my email address, peter.jones@email.com, but I keep getting an 'Invalid Token' error. The token in the URL is 'reset_token=xyz...'. My IP address is 192.168.1.101. This is blocking me from accessing my account, where I have important documents stored. My account number is AC-98765. The support ticket I filed is #TICK-456."}];var ge=(a,t)=>t.value,fe=(a,t)=>t.author;function ye(a,t){if(a&1&&(m(0,"mat-option",5),l(1),o()),a&2){let r=t.$implicit;y("value",r),s(),d(r)}}function he(a,t){if(a&1&&(m(0,"mat-option",5),l(1),o()),a&2){let r=t.$implicit;y("value",r),s(),d(r)}}function Se(a,t){if(a&1&&(m(0,"mat-option",5),l(1),o()),a&2){let r=t.$implicit;y("value",r),s(),d(r)}}function ze(a,t){if(a&1&&(m(0,"mat-option",5),l(1),o()),a&2){let r=t.$implicit;y("value",r.value),s(),d(r.displayValue)}}function Ie(a,t){a&1&&b(0,"mat-spinner",14)}function _e(a,t){a&1&&b(0,"mat-spinner",19)}function ve(a,t){if(a&1&&(m(0,"article",15)(1,"h3",18)(2,"span"),l(3,"Content summary"),o(),_(4,_e,1,0,"mat-spinner",19),o(),m(5,"p"),l(6),o()()),a&2){let r=N();s(4),v(r.isSummaryInProgress()?4:-1),s(2),d(t)}}function we(a,t){if(a&1&&(m(0,"mat-card",17)(1,"mat-card-header")(2,"mat-card-title"),l(3),o(),m(4,"mat-card-subtitle"),l(5),o()(),m(6,"mat-card-content")(7,"p"),l(8),o()()()),a&2){let r=t.$implicit;s(3),d(r.author),s(2),d(r.date),s(3),d(r.content)}}var le=class a{comments=se;summarizerAPIService=D(M);summarizerAPIError=p(null);summarizerAPIInfo={name:"Summarizer API",availability:this.summarizerAPIService.availability,downloadProgress:this.summarizerAPIService.downloadProgress,error:this.summarizerAPIError,docsLinks:[{link:"https://developer.chrome.com/docs/ai/summarizer-api",name:"Chrome Developers Docs"},{link:"https://developer.mozilla.org/en-US/docs/Web/API/Summarizer",name:"MDN Docs"}],chromeInternalLinks:[{link:"chrome://on-device-internals",name:"chrome://on-device-internals"},{link:"chrome://flags/#summarization-api-for-gemini-nano",name:"chrome://flags/#summarization-api-for-gemini-nano"}]};summary=p(null);isSummaryInProgress=p(!1);summarizerFormats=["markdown","plain-text"];summarizerSizes=["short","medium","long"];summarizerTypes=["headline","key-points","teaser","tldr"];outputLanguages=["en","es","ja"].map(t=>({displayValue:this.languageTagToHumanReadable(t,"en")??t,value:t}));formValue={outputLanguage:"en",format:"plain-text"};downloadSummarizerModel(){this.summarizerAPIService.createSummarizer().catch(t=>{this.summarizerAPIError.set(t?t.message:"Unknown error occurred")})}summarizeComments(t){return c(this,null,function*(){this.summary.set(null),this.summarizerAPIError.set(null),this.isSummaryInProgress.set(!0);let u=this.formValue,{context:r}=u,e=P(u,["context"]),n=this.createSummarizerInput(t),i=yield this.summarizerAPIService.summarize(n,e,r).catch(I=>{this.summarizerAPIError.set(I?I.message:"Unknown error occurred")}).finally(()=>{this.isSummaryInProgress.set(!1)});this.summary.set(i??null)})}summarizeCommentsStream(t){return c(this,null,function*(){this.summary.set(null),this.summarizerAPIError.set(null),this.isSummaryInProgress.set(!0);let i=this.formValue,{context:r}=i,e=P(i,["context"]),n=this.createSummarizerInput(t);try{let I=(yield this.summarizerAPIService.summarizeStreaming(n,e,r)).getReader();for(;;){let{done:ue,value:de}=yield I.read();if(ue)break;this.summary.update(ce=>(ce??"")+de)}}catch(u){this.summarizerAPIError.set(u?u.message:"Unknown error occurred")}finally{this.isSummaryInProgress.set(!1)}})}createSummarizerInput(t){return t.reduce((r,e)=>{let n=`${e.author} wrote`,i=`on ${e.date}`,u=`info: ${e.content}`;return`${r}

${n} ${i}
${u}`},"")}languageTagToHumanReadable(t,r){return new Intl.DisplayNames([r],{type:"language"}).of(t)}ngOnDestroy(){this.summarizerAPIService.destroy()}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=x({type:a,selectors:[["gmd-gemini-nano-summarizer-demo"]],decls:44,vars:13,consts:[[3,"download","name","availability","downloadProgress","error","docsLinks","chromeInternalLinks"],[1,"bug-report-section"],[1,"mdc-typography--headline-medium"],[1,"options-form"],["name","format",3,"ngModelChange","ngModel"],[3,"value"],["name","length",3,"ngModelChange","ngModel"],["name","type",3,"ngModelChange","ngModel"],["name","outputLanguage",3,"ngModelChange","ngModel"],[1,"context-field"],["matInput","","name","context",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button","matButton","text",3,"click"],[1,"summary-container"],["diameter","36"],[1,"summary-article"],[1,"comments-thread"],["appearance","outlined",1,"comment-card"],[1,"summary-header"],["diameter","24"]],template:function(r,e){if(r&1&&(m(0,"gmd-ai-api-info",0),C("download",function(){return e.downloadSummarizerModel()}),o(),m(1,"section",1)(2,"h2",2),l(3,"Technical Support Tickets"),o(),m(4,"form",3)(5,"mat-form-field")(6,"mat-label"),l(7,"Format"),o(),m(8,"mat-select",4),z("ngModelChange",function(i){return S(e.formValue.format,i)||(e.formValue.format=i),i}),g(9,ye,2,2,"mat-option",5,w),o()(),m(11,"mat-form-field")(12,"mat-label"),l(13,"Length"),o(),m(14,"mat-select",6),z("ngModelChange",function(i){return S(e.formValue.length,i)||(e.formValue.length=i),i}),g(15,he,2,2,"mat-option",5,w),o()(),m(17,"mat-form-field")(18,"mat-label"),l(19,"Type"),o(),m(20,"mat-select",7),z("ngModelChange",function(i){return S(e.formValue.type,i)||(e.formValue.type=i),i}),g(21,Se,2,2,"mat-option",5,w),o()(),m(23,"mat-form-field")(24,"mat-label"),l(25,"Output Language"),o(),m(26,"mat-select",8),z("ngModelChange",function(i){return S(e.formValue.outputLanguage,i)||(e.formValue.outputLanguage=i),i}),g(27,ze,2,2,"mat-option",5,ge),o()(),m(29,"mat-form-field",9)(30,"mat-label"),l(31,"Context"),o(),m(32,"textarea",10),z("ngModelChange",function(i){return S(e.formValue.context,i)||(e.formValue.context=i),i}),o()(),m(33,"div",11)(34,"button",12),C("click",function(){return e.summarizeComments(e.comments)}),l(35," Summarize "),o(),m(36,"button",12),C("click",function(){return e.summarizeCommentsStream(e.comments)}),l(37," Stream Summarize "),o()()(),m(38,"div",13),_(39,Ie,1,0,"mat-spinner",14),_(40,ve,7,2,"article",15),o(),m(41,"div",16),g(42,we,9,3,"mat-card",17,fe),o()()),r&2){let n;y("name",e.summarizerAPIInfo.name)("availability",e.summarizerAPIInfo.availability())("downloadProgress",e.summarizerAPIInfo.downloadProgress())("error",e.summarizerAPIInfo.error())("docsLinks",e.summarizerAPIInfo.docsLinks)("chromeInternalLinks",e.summarizerAPIInfo.chromeInternalLinks),s(8),h("ngModel",e.formValue.format),s(),f(e.summarizerFormats),s(5),h("ngModel",e.formValue.length),s(),f(e.summarizerSizes),s(5),h("ngModel",e.formValue.type),s(),f(e.summarizerTypes),s(5),h("ngModel",e.formValue.outputLanguage),s(),f(e.outputLanguages),s(5),h("ngModel",e.formValue.context),s(7),v(e.isSummaryInProgress()&&!e.summary()?39:-1),s(),v((n=e.summary())?40:-1,n),s(2),f(e.comments)}},dependencies:[X,K,q,H,R,J,$,Q,V,L,B,G,F,U,W,O,ee,Z,Y,re,te,ie,ae,me,oe,ne],styles:["[_nghost-%COMP%]{display:block;padding-bottom:48px}.options-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:24px}.options-form[_ngcontent-%COMP%]   .context-field[_ngcontent-%COMP%]{grid-column:1/-1}.options-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;gap:16px;justify-content:flex-end}.summary-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.summary-article[_ngcontent-%COMP%]{padding:16px;border-radius:8px;background-color:var(--mat-sys-color-surface-container-high);color:var(--mat-sys-color-on-surface-variant)}.summary-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-top:0;color:var(--mat-sys-color-on-surface)}"],changeDetection:0})};export{le as GeminiNanoSummarizerDemoComponent};
