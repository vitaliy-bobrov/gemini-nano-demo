import{a as X,b as Y,c as ee,d as te,e as ne,f as oe,g as re,h as ae,i as ie,j as se}from"./chunk-CXNEQ2UB.js";import"./chunk-25YY5UG2.js";import{a as F,b as U,c as q,f as H,g as Q,h as W,l as Z}from"./chunk-6DZ3FOQB.js";import{$ as C,$a as a,Bb as k,Cb as A,Db as G,Ga as O,Jb as R,Kb as T,Sc as j,Ta as c,Tc as B,Ua as u,Va as S,W as _,Xa as L,Ya as D,Za as h,Zc as z,_a as i,a as M,ab as I,b as v,bd as $,d,dc as J,ed as K,hb as b,hd as V,ib as x,ma as m,pa as E,wa as s,wb as p,xb as N,yb as P}from"./chunk-ONSF3LYM.js";var w=class n extends W{static DefaultOptions={expectedInputLanguages:["en"],outputLanguage:"en",expectedInputs:[{type:"text"}]};session=m(null);languageModelParams=m(null);checkAvailability(){return d(this,arguments,function*(t=n.DefaultOptions){if(self.LanguageModel){let o=yield self.LanguageModel.params();this.languageModelParams.set(o);let e=yield self.LanguageModel.availability(t);this.availabilityStatus.set(e)}else this.availabilityStatus.set("unavailable")})}createLanguageModel(){return d(this,arguments,function*(t=n.DefaultOptions){switch(this.availability()){case"unavailable":throw new Error("Prompt API is not available.");case"checking":throw new Error("Prompt API availability is still being checked.");case"downloading":throw new Error("Prompt API is currently downloading.");case"available":case"downloadable":{if(!this.isUserActivated())throw new Error("User activation is required to download the Prompt API.");if(self.LanguageModel){let o=yield self.LanguageModel.create(v(M({},t),{monitor:e=>{e.addEventListener("downloadprogress",r=>{this.modelTotalSizeState.set(r.total??null),this.downloadProgressState.set(r.loaded*100)})}}));yield this.checkAvailability(t),this.session.set(o)}return this.session()}default:throw new Error("Unknown availability status.")}})}prompt(e){return d(this,arguments,function*(t,o=n.DefaultOptions){this.destroy();let r=yield this.createLanguageModel(o);if(!r)throw new Error("Prompt API is not available.");let l=r.inputQuota;if(r.inputUsage>l)throw new Error("Insufficient quota to process input.");return r.prompt(t)})}promptStreaming(e){return d(this,arguments,function*(t,o=n.DefaultOptions){this.destroy();let r=yield this.createLanguageModel(o);if(!r)throw new Error("Prompt API is not available.");let l=r.inputQuota;if(r.inputUsage>l)throw new Error("Insufficient quota to process input.");return r.promptStreaming(t)})}destroy(){this.session()?.destroy(),this.session.set(null)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=E(n)))(e||n)}})();static \u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})};var le=[`Error: ENOENT: no such file or directory, open '/app/nonexistent-file.txt'
    at Object.openSync (node:fs:590:18)
    at readFileSync (node:fs:458:35)
    at main (/app/index.js:10:20)
    at Object.<anonymous> (/app/index.js:15:1)
    at Module._compile (node:internal/modules/cjs/loader:1376:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1435:10)
    at Module.load (node:internal/modules/cjs/loader:1207:32)
    at Module._load (node:internal/modules/cjs/loader:1023:12)
    at Function.executeUserEntryPoint [as _executeUserEntryPoint] (node:internal/main/run_main:135:12)
    at <anonymous> (node:internal/main/run_main_module:28:49)`,`Traceback (most recent call last):
  File "main.py", line 5, in <module>
    result = 1 / 0
ZeroDivisionError: division by zero`,`panic: runtime error: index out of range [10] with length 5

goroutine 1 [running]:
main.main()
    /app/main.go:8 +0x39`,`[ERROR] 2025-09-21 15:30:10,123 [http-nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot read properties of null (reading 'getPricingDetails')] with root cause
java.lang.NullPointerException: Cannot read properties of null (reading 'getPricingDetails')
    at com.example.service.ProductService.calculateFinalPrice(ProductService.java:42)
    at com.example.controller.OrderController.submitOrder(OrderController.java:88)`];function de(n,t){if(n&1&&(i(0,"mat-option",7),p(1),a()),n&2){let o=t.$implicit,e=t.$index;h("value",o),s(),P("Example ",e+1)}}function ce(n,t){n&1&&I(0,"mat-spinner",10)}function ue(n,t){n&1&&p(0," Extract Key Info ")}function ge(n,t){if(n&1&&(i(0,"p",11),p(1),a()),n&2){let o=x();s(),P("Error: ",o.extractionError())}}function fe(n,t){if(n&1&&(i(0,"h3"),p(1,"Extracted JSON:"),a(),i(2,"pre",12),p(3),R(4,"json"),a()),n&2){let o=x();s(3),N(T(4,1,o.extractedJsonOutput()))}}function he(n,t){n&1&&I(0,"mat-spinner",10)}function be(n,t){n&1&&p(0," Generate Bug Report ")}function xe(n,t){if(n&1&&(i(0,"p",11),p(1),a()),n&2){let o=x();s(),P("Error: ",o.reportGenerationError())}}function Pe(n,t){if(n&1&&(i(0,"h3"),p(1,"Generated Bug Report:"),a(),i(2,"article",13),p(3),a()),n&2){let o=x();s(3),P(" ",o.bugReportOutput()," ")}}var pe=class n{promptAPIService=C(w);promptAPIError=m(null);rawLogInputExamples=le;rawLogInput=m("");extractedJsonOutput=m(null);bugReportOutput=m(null);isExtracting=m(!1);isGeneratingReport=m(!1);extractionError=m(null);reportGenerationError=m(null);promptAPIInfo={name:"Prompt API",availability:this.promptAPIService.availability,downloadProgress:this.promptAPIService.downloadProgress,error:this.promptAPIError,docsLinks:[{link:"https://developer.chrome.com/docs/ai/prompt-api",name:"Chrome Developers Docs"},{link:"https://github.com/webmachinelearning/prompt-api",name:"Explainer"}],chromeInternalLinks:[{link:"chrome://on-device-internals",name:"chrome://on-device-internals"},{link:"chrome://flags/#prompt-api-for-gemini-nano-multimodal-input",name:"chrome://flags/#prompt-api-for-gemini-nano-multimodal-input"}]};downloadPromptModel(){this.promptAPIService.createLanguageModel().catch(t=>{this.promptAPIError.set(t?t.message:"Unknown error occurred")})}extractInfoFromLog(){return d(this,null,function*(){this.extractedJsonOutput.set(null),this.bugReportOutput.set(null),this.extractionError.set(null),this.isExtracting.set(!0);let t="Extract the key information (error message, file name, line number) from the following log: "+this.rawLogInput()+'/nUse the following JSON schema to format the output."explanation" field should provide human readable explanation of the error."possibleSolution" field should provide a very short description of a possible solution to fix the error."programmingLanguage" field should specify the possible programming language of the code snippet.',o={type:"object",properties:{errorMessage:{type:"string"},fileName:{type:"string"},lineNumber:{type:"string"},programmingLanguage:{type:"string"},explanation:{type:"string"},possibleSolution:{type:"string"}},required:["errorMessage","fileName","lineNumber"]},e=v(M({},w.DefaultOptions),{responseConstraint:o});this.extractedJsonOutput.set("");try{let l=(yield this.promptAPIService.promptStreaming(t,e)).getReader();for(;;){let{done:g,value:y}=yield l.read();if(g){let f=null;try{f=JSON.parse(this.extractedJsonOutput())}catch{f=this.parseJsonFromMarkdown(this.extractedJsonOutput())}this.extractedJsonOutput.set(f??null);break}this.extractedJsonOutput.update(f=>(f??"")+y)}}catch(r){this.extractionError.set(r?r.message:"Unknown error occurred during extraction")}finally{this.isExtracting.set(!1)}})}generateBugReport(){return d(this,null,function*(){this.bugReportOutput.set(null),this.reportGenerationError.set(null),this.isGeneratingReport.set(!0);let t=this.extractedJsonOutput();if(!t){this.reportGenerationError.set("No extracted data available to generate a report."),this.isGeneratingReport.set(!1);return}let o=`Based on this structured data, write a concise bug report including a suggested title, a summary of the error, potential reproduction steps, guess on a possible module or part of tech stack (backend/frontend), and brief info about any possible fix solution or debug steps.Here is the data: ${JSON.stringify(t,null,2)}`;try{let r=(yield this.promptAPIService.promptStreaming(o)).getReader();for(;;){let{done:l,value:g}=yield r.read();if(l)break;this.bugReportOutput.update(y=>(y??"")+g)}}catch(e){this.reportGenerationError.set(e?e.message:"Unknown error occurred during report generation")}finally{this.isGeneratingReport.set(!1)}})}onExampleSelected(t){this.bugReportOutput.set(null),this.extractedJsonOutput.set(null),this.rawLogInput.set(t)}parseJsonFromMarkdown(t){let o=/```json\n([\s\S]*?)\n```/,e=t.match(o);if(e&&e[1]){let r=e[1];try{return JSON.parse(r)}catch(l){return console.error("Error parsing JSON from markdown:",l),null}}return null}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=O({type:n,selectors:[["gemini-nano-prompt-demo"]],decls:36,vars:15,consts:[[3,"download","name","availability","downloadProgress","error","docsLinks","chromeInternalLinks"],[1,"bug-report-section"],[1,"mdc-typography--headline-medium"],["appearance","outlined"],[1,"full-width"],["matInput","","rows","10","placeholder","Paste your messy error log here...",3,"ngModelChange","ngModel"],[3,"selectionChange"],[3,"value"],[1,"form-actions"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","24"],[1,"error-message"],[1,"code-block"],[1,"bug-report-article"]],template:function(o,e){o&1&&(i(0,"gmd-ai-api-info",0),b("download",function(){return e.downloadPromptModel()}),a(),i(1,"section",1)(2,"h2",2),p(3,"Smart Bug Report Assistant"),a(),i(4,"mat-card",3)(5,"mat-card-header")(6,"mat-card-title"),p(7,"Step 1: Extracting Order from Chaos with Structured Output"),a()(),i(8,"mat-card-content")(9,"mat-form-field",4)(10,"mat-label"),p(11,"Raw Error Log"),a(),i(12,"textarea",5),G("ngModelChange",function(l){return A(e.rawLogInput,l)||(e.rawLogInput=l),l}),a()(),i(13,"mat-form-field",4)(14,"mat-label"),p(15,"Select an example"),a(),i(16,"mat-select",6),b("selectionChange",function(l){return e.onExampleSelected(l.value)}),L(17,de,2,2,"mat-option",7,S),a()(),i(19,"div",8)(20,"button",9),b("click",function(){return e.extractInfoFromLog()}),c(21,ce,1,0,"mat-spinner",10)(22,ue,1,0),a()(),c(23,ge,2,1,"p",11),c(24,fe,5,3),a()(),i(25,"mat-card",3)(26,"mat-card-header")(27,"mat-card-title"),p(28,"Step 2: Generating a Digestible Report with Streaming"),a()(),i(29,"mat-card-content")(30,"div",8)(31,"button",9),b("click",function(){return e.generateBugReport()}),c(32,he,1,0,"mat-spinner",10)(33,be,1,0),a()(),c(34,xe,2,1,"p",11),c(35,Pe,4,1),a()()()),o&2&&(h("name",e.promptAPIInfo.name)("availability",e.promptAPIInfo.availability())("downloadProgress",e.promptAPIInfo.downloadProgress())("error",e.promptAPIInfo.error())("docsLinks",e.promptAPIInfo.docsLinks)("chromeInternalLinks",e.promptAPIInfo.chromeInternalLinks),s(12),k("ngModel",e.rawLogInput),s(5),D(e.rawLogInputExamples),s(3),h("disabled",e.isExtracting()||!e.rawLogInput()),s(),u(e.isExtracting()?21:22),s(2),u(e.extractionError()?23:-1),s(),u(e.extractedJsonOutput()?24:-1),s(7),h("disabled",e.isGeneratingReport()||!e.extractedJsonOutput()),s(),u(e.isGeneratingReport()?32:33),s(2),u(e.reportGenerationError()?34:-1),s(),u(e.bugReportOutput()?35:-1))},dependencies:[Z,V,z,$,K,B,j,Q,F,q,H,U,ee,Y,X,ne,te,re,oe,se,ie,ae,J],styles:["[_nghost-%COMP%]{display:block;padding:16px}.bug-report-section[_ngcontent-%COMP%]{margin-top:24px}.bug-report-section[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:24px}.bug-report-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.bug-report-section[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.bug-report-section[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.bug-report-section[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.bug-report-section[_ngcontent-%COMP%]   .code-block[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-radius:4px;overflow-x:auto;white-space:pre-wrap;word-break:break-all}.bug-report-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:8px}.bug-report-section[_ngcontent-%COMP%]   .bug-report-article[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word;background-color:#e8f5e9;padding:16px;border-radius:4px}"],changeDetection:0})};export{pe as GeminiNanoPromptDemoComponent};
