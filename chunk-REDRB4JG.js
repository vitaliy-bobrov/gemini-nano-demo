import{a as se,b as le,c as pe,d as me,e as ce,f as de,g as ue,h as ge,i as fe,j as he}from"./chunk-L6UHUXTR.js";import"./chunk-26HO3GLA.js";import{a as V,b as Z,c as X,f as Y,g as ee,h as te,l as ae}from"./chunk-V7XMB45P.js";import{$ as G,$a as x,$c as ne,Ab as E,Db as q,Eb as H,Fb as Q,Ha as j,Ka as $,Lb as S,Mb as k,Uc as z,Va as h,Vc as K,W as A,Wa as b,Xa as J,Za as B,_a as F,a as I,ab as s,b as C,bb as a,cb as _,d as g,dd as oe,fc as W,gd as re,jb as P,jd as ie,kb as w,ma as d,pa as R,ua as T,xa as l,yb as m,zb as U}from"./chunk-JWYJDHHG.js";var M=class n extends te{static DefaultOptions={expectedInputLanguages:["en"],outputLanguage:"en",expectedInputs:[{type:"text"}]};session=d(null);languageModelParams=d(null);checkAvailability(){return g(this,arguments,function*(t=n.DefaultOptions){if(self.LanguageModel){let o=yield self.LanguageModel.params();this.languageModelParams.set(o);let e=yield self.LanguageModel.availability(t);this.availabilityStatus.set(e)}else this.availabilityStatus.set("unavailable")})}createLanguageModel(){return g(this,arguments,function*(t=n.DefaultOptions){switch(this.availability()){case"unavailable":throw new Error("Prompt API is not available.");case"checking":throw new Error("Prompt API availability is still being checked.");case"downloading":throw new Error("Prompt API is currently downloading.");case"available":case"downloadable":{if(!this.isUserActivated())throw new Error("User activation is required to download the Prompt API.");if(self.LanguageModel){let o=yield self.LanguageModel.create(C(I({},t),{monitor:e=>{e.addEventListener("downloadprogress",r=>{this.modelTotalSizeState.set(r.total??null),this.downloadProgressState.set(r.loaded*100)})}}));yield this.checkAvailability(t),this.session.set(o)}return this.session()}default:throw new Error("Unknown availability status.")}})}prompt(e){return g(this,arguments,function*(t,o=n.DefaultOptions){this.destroy();let r=yield this.createLanguageModel(o);if(!r)throw new Error("Prompt API is not available.");let i=r.inputQuota;if(r.inputUsage>i)throw new Error("Insufficient quota to process input.");return r.prompt(t)})}promptStreaming(e){return g(this,arguments,function*(t,o=n.DefaultOptions){this.destroy();let r=yield this.createLanguageModel(o);if(!r)throw new Error("Prompt API is not available.");let i=r.inputQuota;if(r.inputUsage>i)throw new Error("Insufficient quota to process input.");return r.promptStreaming(t)})}destroy(){this.session()?.destroy(),this.session.set(null)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=R(n)))(e||n)}})();static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};var p=(n,t,o={})=>`<${n}${Object.entries(o).map(([e,r])=>r?` ${e}="${D(r)}"`:"").join("")}>${t}</${n}>`,D=(n="")=>n.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Pe=/(?:(^|\n)([+-]|\d+\.) +(.*(\n[ \t]+.*)*))+/g,we=n=>{let t=n.match(/^[+-]/m)?"ul":"ol";return n?p(t,n.replace(/(?:[+-]|\d+\.) +(.*)\n?(([ \t].*\n?)*)/g,(o,e,r)=>p("li",y(`${e}
${((i="")=>i.replace(new RegExp("^"+(i.match(/^\s+/)||"")[0],"gm"),""))(r).replace(Pe,we)}`)))):""},L=(n,t,o,e=r=>r)=>r=>p(n,e(r.replace(t,o))),xe=n=>Me(n,[/^(```)(.*)\n((.*\n)*?)\1/gm,(t,o,e,r)=>p("pre",p("code",D(r),e?{class:`language-${e.trim()}`}:{})),/(^>.*\n?)+/gm,L("blockquote",/^> ?(.*)$/gm,"$1",v),/((^|\n)\|.+)+/g,L("table",/^.*(\n\|---.*?)?$/gm,(t,o="")=>L("tr",/\|(-?)([^|]*)\1(\|$)?/gm,(e,r,i)=>p(r||o?"th":"td",y(i)))(t.slice(0,t.length-o.length))),Pe,we,/#\[([^\]]+?)]/g,p("a","",{name:"$1"}),/^(#+) +(.*)(?:$)/gm,(t,o,e)=>p("h"+o.length,y(e)),/^(===+|---+)(?=\s*$)/gm,"<hr>"],N),y=(n="",t)=>{let o=[],e=r=>r.replace(/\\(\d+)/g,(i,c)=>e(o[parseInt(c)-1]));return n=n.trim().replace(/`([^`]*)`/g,(r,i)=>"\\"+o.push(p("code",D(i)))).replace(/[!]?\[([!]?\[.*?\)|[^\]]*?)]\((.*?)( .*?)?\)|(\w+:\/\/[$\-.+!*'()\/,\w]+)/g,(r,i,c,f,u)=>u?t?r:"\\"+o.push(p("a",u,{href:u})):"\\"+o.push(r[0]=="!"?p("img","",{src:c,alt:i,title:f}):p("a",y(i,1),{href:c,title:f}))),e(t?n:v(n))},v=n=>Me(n,[/([*_]{1,3})((.|\n)+?)\1/g,(t,o,e)=>(o=o.length,e=v(e),o>1&&(e=p("strong",e)),o%2&&(e=p("em",e)),e),/(~{1,3})((.|\n)+?)\1/g,(t,o,e)=>p([,"u","s","del"][o.length],v(e)),/  \n|\n  /g,"<br>"],v),Me=(n,t,o)=>{for(let e=0;e<t.length;e+=2){let r=t[e].exec(n);if(r){let[i,...c]=r;return o(n.slice(0,r.index))+(typeof t[e+1]=="string"?t[e+1].replace(/\$(\d)/g,(f,u)=>c[u-1]):t[e+1].apply(null,r))+o(n.slice(r.index+i.length))}}return n},N=n=>{let t=n.replace(/[\r\v\b\f]/g,"").replace(/\\./g,e=>`&#${e.charCodeAt(1)};`);return(xe(t)!==t||t.match(/^[\s\n]*$/i)?xe(t):y(t).replace(/((.|\n)+?)(\n\n+|$)/g,(e,r)=>p("p",r))).replace(/&#(\d+);/g,(e,r)=>String.fromCharCode(+r))};var O=class n{transform(t){return t?N(t):""}static \u0275fac=function(o){return new(o||n)};static \u0275pipe=$({name:"markdown",type:n,pure:!0})};var ve=[`Error: ENOENT: no such file or directory, open '/app/nonexistent-file.txt'
    at Object.openSync (node:fs:590:18)
    at readFileSync (node:fs:458:35)
    at main (/app/index.js:10:20)
    at Object.<anonymous> (/app/index.js:15:1)
    at Module._compile (node:internal/modules/cjs/loader:1376:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1435:10)
    at Module.load (node:internal/modules/cjs/loader:1207:32)
    at Module._load (node:internal/modules/cjs/loader:1023:12)
    at Function.executeUserEntryPoint [as _executeUserEntryPoint] (node:internal/main/run_main:135:12)
    at <anonymous> (node:internal/main/run_main_module:28:49)`,`Traceback (most recent call last):
  File "main.py", line 5, in <module>
    result = 1 / 0
ZeroDivisionError: division by zero`,`panic: runtime error: index out of range [10] with length 5

goroutine 1 [running]:
main.main()
    /app/main.go:8 +0x39`,`[ERROR] 2025-09-21 15:30:10,123 [http-nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot read properties of null (reading 'getPricingDetails')] with root cause
java.lang.NullPointerException: Cannot read properties of null (reading 'getPricingDetails')
    at com.example.service.ProductService.calculateFinalPrice(ProductService.java:42)
    at com.example.controller.OrderController.submitOrder(OrderController.java:88)`];function Ie(n,t){if(n&1&&(s(0,"mat-option",7),m(1),a()),n&2){let o=t.$implicit,e=t.$index;x("value",o),l(),E("Example ",e+1)}}function Ce(n,t){n&1&&_(0,"mat-spinner",10)}function _e(n,t){n&1&&m(0," Extract Key Info ")}function Ee(n,t){if(n&1&&(s(0,"p",11),m(1),a()),n&2){let o=w();l(),E("Error: ",o.extractionError())}}function Oe(n,t){if(n&1&&(s(0,"h3"),m(1,"Extracted JSON:"),a(),s(2,"pre",12),m(3),S(4,"json"),a()),n&2){let o=w();l(3),U(k(4,1,o.extractedJsonOutput()))}}function Se(n,t){n&1&&_(0,"mat-spinner",10)}function ke(n,t){n&1&&m(0," Generate Bug Report ")}function Le(n,t){if(n&1&&(s(0,"p",11),m(1),a()),n&2){let o=w();l(),E("Error: ",o.reportGenerationError())}}function De(n,t){if(n&1&&(s(0,"h3"),m(1,"Generated Bug Report:"),a(),s(2,"article",13),_(3,"p",14),S(4,"markdown"),a()),n&2){let o=w();l(3),x("innerHTML",k(4,1,o.bugReportOutput()),T)}}var ye=class n{promptAPIService=G(M);promptAPIError=d(null);rawLogInputExamples=ve;rawLogInput=d("");extractedJsonOutput=d(null);bugReportOutput=d(null);isExtracting=d(!1);isGeneratingReport=d(!1);extractionError=d(null);reportGenerationError=d(null);promptAPIInfo={name:"Prompt API",availability:this.promptAPIService.availability,downloadProgress:this.promptAPIService.downloadProgress,error:this.promptAPIError,docsLinks:[{link:"https://developer.chrome.com/docs/ai/prompt-api",name:"Chrome Developers Docs"},{link:"https://github.com/webmachinelearning/prompt-api",name:"Explainer"}],chromeInternalLinks:[{link:"chrome://on-device-internals",name:"chrome://on-device-internals"},{link:"chrome://flags/#prompt-api-for-gemini-nano-multimodal-input",name:"chrome://flags/#prompt-api-for-gemini-nano-multimodal-input"}]};downloadPromptModel(){this.promptAPIService.createLanguageModel().catch(t=>{this.promptAPIError.set(t?t.message:"Unknown error occurred")})}extractInfoFromLog(){return g(this,null,function*(){this.extractedJsonOutput.set(null),this.bugReportOutput.set(null),this.extractionError.set(null),this.isExtracting.set(!0);let t="Extract the key information (error message, file name, line number) from the following log: "+this.rawLogInput()+'/nUse the following JSON schema to format the output."explanation" field should provide human readable explanation of the error."possibleSolution" field should provide a very short description of a possible solution to fix the error."programmingLanguage" field should specify the possible programming language of the code snippet.',o={type:"object",properties:{errorMessage:{type:"string"},fileName:{type:"string"},lineNumber:{type:"string"},programmingLanguage:{type:"string"},explanation:{type:"string"},possibleSolution:{type:"string"}},required:["errorMessage","fileName","lineNumber"]},e=C(I({},M.DefaultOptions),{responseConstraint:o});this.extractedJsonOutput.set("");try{let i=(yield this.promptAPIService.promptStreaming(t,e)).getReader();for(;;){let{done:c,value:f}=yield i.read();if(c){let u=null;try{u=JSON.parse(this.extractedJsonOutput())}catch{u=this.parseJsonFromMarkdown(this.extractedJsonOutput())}this.extractedJsonOutput.set(u??null);break}this.extractedJsonOutput.update(u=>(u??"")+f)}}catch(r){this.extractionError.set(r?r.message:"Unknown error occurred during extraction")}finally{this.isExtracting.set(!1)}})}generateBugReport(){return g(this,null,function*(){this.bugReportOutput.set(null),this.reportGenerationError.set(null),this.isGeneratingReport.set(!0);let t=this.extractedJsonOutput();if(!t){this.reportGenerationError.set("No extracted data available to generate a report."),this.isGeneratingReport.set(!1);return}let o=`Based on this structured data, write a concise bug report including a suggested title, a summary of the error, potential reproduction steps, guess on a possible module or part of tech stack (backend/frontend), and brief info about any possible fix solution or debug steps.Here is the data: ${JSON.stringify(t,null,2)}`;try{let r=(yield this.promptAPIService.promptStreaming(o)).getReader();for(;;){let{done:i,value:c}=yield r.read();if(i)break;this.bugReportOutput.update(f=>(f??"")+c)}}catch(e){this.reportGenerationError.set(e?e.message:"Unknown error occurred during report generation")}finally{this.isGeneratingReport.set(!1)}})}onExampleSelected(t){this.bugReportOutput.set(null),this.extractedJsonOutput.set(null),this.rawLogInput.set(t)}parseJsonFromMarkdown(t){let o=/```json\n([\s\S]*?)\n```/,e=t.match(o);if(e&&e[1]){let r=e[1];try{return JSON.parse(r)}catch(i){return console.error("Error parsing JSON from markdown:",i),null}}return null}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=j({type:n,selectors:[["gemini-nano-prompt-demo"]],decls:36,vars:15,consts:[[3,"download","name","availability","downloadProgress","error","docsLinks","chromeInternalLinks"],[1,"bug-report-section"],[1,"mdc-typography--headline-medium"],["appearance","outlined"],[1,"full-width"],["matInput","","rows","10","placeholder","Paste your messy error log here...",3,"ngModelChange","ngModel"],[3,"selectionChange"],[3,"value"],[1,"form-actions"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","24"],[1,"error-message"],[1,"code-block"],[1,"bug-report-article"],[3,"innerHTML"]],template:function(o,e){o&1&&(s(0,"gmd-ai-api-info",0),P("download",function(){return e.downloadPromptModel()}),a(),s(1,"section",1)(2,"h2",2),m(3,"Smart Bug Report Assistant"),a(),s(4,"mat-card",3)(5,"mat-card-header")(6,"mat-card-title"),m(7,"Step 1: Extracting Order from Chaos with Structured Output"),a()(),s(8,"mat-card-content")(9,"mat-form-field",4)(10,"mat-label"),m(11,"Raw Error Log"),a(),s(12,"textarea",5),Q("ngModelChange",function(i){return H(e.rawLogInput,i)||(e.rawLogInput=i),i}),a()(),s(13,"mat-form-field",4)(14,"mat-label"),m(15,"Select an example"),a(),s(16,"mat-select",6),P("selectionChange",function(i){return e.onExampleSelected(i.value)}),B(17,Ie,2,2,"mat-option",7,J),a()(),s(19,"div",8)(20,"button",9),P("click",function(){return e.extractInfoFromLog()}),h(21,Ce,1,0,"mat-spinner",10)(22,_e,1,0),a()(),h(23,Ee,2,1,"p",11),h(24,Oe,5,3),a()(),s(25,"mat-card",3)(26,"mat-card-header")(27,"mat-card-title"),m(28,"Step 2: Generating a Digestible Report with Streaming"),a()(),s(29,"mat-card-content")(30,"div",8)(31,"button",9),P("click",function(){return e.generateBugReport()}),h(32,Se,1,0,"mat-spinner",10)(33,ke,1,0),a()(),h(34,Le,2,1,"p",11),h(35,De,5,3),a()()()),o&2&&(x("name",e.promptAPIInfo.name)("availability",e.promptAPIInfo.availability())("downloadProgress",e.promptAPIInfo.downloadProgress())("error",e.promptAPIInfo.error())("docsLinks",e.promptAPIInfo.docsLinks)("chromeInternalLinks",e.promptAPIInfo.chromeInternalLinks),l(12),q("ngModel",e.rawLogInput),l(5),F(e.rawLogInputExamples),l(3),x("disabled",e.isExtracting()||!e.rawLogInput()),l(),b(e.isExtracting()?21:22),l(2),b(e.extractionError()?23:-1),l(),b(e.extractedJsonOutput()?24:-1),l(7),x("disabled",e.isGeneratingReport()||!e.extractedJsonOutput()),l(),b(e.isGeneratingReport()?32:33),l(2),b(e.reportGenerationError()?34:-1),l(),b(e.bugReportOutput()?35:-1))},dependencies:[ae,ie,ne,oe,re,K,z,ee,V,X,Y,Z,pe,le,se,ce,me,ue,de,he,fe,ge,W,O],styles:["[_nghost-%COMP%]{display:block;padding:16px}.bug-report-section[_ngcontent-%COMP%]{margin-top:24px}.bug-report-section[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:24px}.bug-report-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.bug-report-section[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.bug-report-section[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.bug-report-section[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.bug-report-section[_ngcontent-%COMP%]   .code-block[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-radius:4px;overflow-x:auto;white-space:pre-wrap;word-break:break-all}.bug-report-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:8px}.bug-report-section[_ngcontent-%COMP%]   .bug-report-article[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word;background-color:#e8f5e9;padding:16px;border-radius:4px}"],changeDetection:0})};export{ye as GeminiNanoPromptDemoComponent};
